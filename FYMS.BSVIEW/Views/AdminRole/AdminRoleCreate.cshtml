
@{
    ViewBag.Title = "人员角色创建";
    Layout = "~/Views/Shared/_LayoutPageAdmin.cshtml";
}

<div class="row">
    <h3 class="page-header">@ViewBag.Title</h3>
</div>
@model FYMS.Common.ViewModel.User_admin
<form id="user_form" enctype="multipart/form-data" class="form-horizontal" action="/AdminRole/Save" method="post">
    <div class="row">
        <div class="col-lg-7">
            <div class="form-group">
                <label class="col-lg-2 control-label">角色编号</label>
                <div class="col-lg-6 ">
                    <input type="text" class="form-control" name="role_code" />
                </div>
            </div>
            <div class="form-group">
                <label class="col-lg-2 control-label">角色名称</label>
                <div class="col-lg-6 ">
                    <input type="text" class="form-control" name="role_name" />
                </div>
            </div>
            
            <div class="form-group">
                <label class="col-lg-2 control-label">角色说明</label>
                <div class="col-lg-6 ">
                    <textarea class="form-control" rows="4" name="role_common"></textarea>
                </div>
            </div>
        </div>

        <div class="col-lg-4">
            

        </div>

        <div class="form-group">
            <div class="col-lg-8 col-lg-offset-4">
                <input type="button" class="btn btn-primary" id="validateBtn" value="保存" />
                <input type="button" class="btn btn-info" id="resetBtn" value="重置" />
                <a href="/AdminRole/AdminRoleMain" class="btn btn-primary">返回</a>
            </div>
        </div>

    </div>
</form>
<script type="text/javascript">
    $('#user_form').bootstrapValidator({
        //        live: 'disabled',
        message: 'This value is not valid',
        feedbackIcons: {
            valid: 'glyphicon glyphicon-ok',
            invalid: 'glyphicon glyphicon-remove',
            validating: 'glyphicon glyphicon-refresh'
        },
        fields: {
            role_code: {
                validators: {
                    notEmpty: {
                        message: '请输入管理员编号'
                    }
                }
            },
           role_name: {
                validators: {
                    notEmpty: {
                        message: '请输入管理员角色名称'
                    }
                }
            },
           role_common: {
                validators: {
                    notEmpty: {
                        message: '请输入管理员角色说明'
                    }
                }
            },
        }
    });

    $("#user_form").bootstrapValidator('validate');

    $("#resetBtn").click(function () {
        $("#user_form").data("bootstrapValidator").resetForm(true);
    });

    $("#validateBtn").click(function () {
        var formData = new FormData($("#user_form")[0]);
        $.ajax({
            type: "POST",
            url: "/AdminRole/Save",
            async: true,
            data: formData,
            ///提交表单不加会报错
            cache: false,
            contentType: false,
            processData: false,

            success: function (result) {
                if (result == "保存成功") {

                    window.location.href = "@Url.Action("AdminRoleMain","AdminRole")";
                }
                else {
                    toastr.warning(result, '提示');
                }
            },
            error: function () {
                toastr.error('异常', 'error');
            }
        })
    });
</script>