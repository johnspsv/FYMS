
@{
    ViewBag.Title = "公司管理员审核";
    Layout = "~/Views/Shared/_LayoutPageAdmin.cshtml";
}

@model Tuple<PagedList.IPagedList<FYMS.Common.ViewModel.CheckTable>, FYMS.Common.ViewModel.CheckTableSearch, List<SelectListItem>>
@using PagedList.Mvc;

<link href="~/Content/PagedList.css" rel="stylesheet" />
<h3 class="page-header">@ViewBag.Title</h3>
@using (Html.BeginForm("AdminCheckTableMain", "Log", FormMethod.Post, new { @class = "form-horizontal" }))
{
    <div class="row">
        <div class="col-lg-12 ">

            <a class="btn btn-success " data-toggle="collapse" data-target="#serchcondition">
                查询条件
            </a>
        </div>
    </div>
    <div class="row">
        <div class="col-lg-12">
            <div id="serchcondition" class="collapse">
                <div class="panel panel-default">
                    <div class="panel-body">
                        <div class="row ">
                            <div class="col-lg-6 ">
                                <div class="form-group">
                                    <label class="col-lg-3 control-label">日期区间起</label>
                                    <div class="col-lg-6 ">
                                        @Html.TextBox("StartDate", ViewBag.StartDate as string, new { @type = "date", @class = "form-control" })
                                    </div>
                                    @ViewBag.StartDate
                                </div>
                            </div>
                            <div class="col-lg-6">
                                <div class="form-group">
                                    <label class="col-lg-3 control-label">日期区间止</label>
                                    <div class="col-lg-6 ">
                                        @Html.TextBox("EndDate", ViewBag.EndDate as string, new { @type = "date", @class = "form-control" })
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row ">
                            <div class="col-lg-6 ">
                                <div class="form-group">
                                    <label class="col-lg-3 control-label">审核状态</label>
                                    <div class="col-lg-6 ">
                                        @Html.DropDownList("STvalue", Model.Item3, new { @class = "form-control" })
                                    </div>
                                    @ViewBag.CtrlType
                                </div>
                            </div>
                            <div class="col-lg-6">
                                <div class="form-group">
                                    <label class="col-lg-3 control-label">输入搜索内容</label>
                                    <div class="col-lg-6">
                                        @Html.TextBox("SearchString", ViewBag.SearchString as string, new { @class = "form-control" })
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="row text-center">
                            <input type="submit" id="btnsearch" class="btn btn-danger " value="搜索" />
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
}
<br />
<div class="table-responsive">
    <table class="table table-hover text-nowrap">
        <thead>
            <tr class="active">
                <th>
                    序号
                </th>
                <th>
                    @Html.ActionLink("申请日期", "AdminCheckTableMain", new { Model.Item2, sortOrder = ViewBag.NameSortParm })
                </th>
                <th>
                    公司名称
                </th>
                <th>
                    申请人
                </th>
                <th>
                    申请人手机号
                </th>
                <th>
                    审核状态
                </th>
                <th>
                    操作
                </th>
            </tr>
        </thead>
        <tbody>
            @if (Model.Item1 != null)
            {
                foreach (var item in Model.Item1)
                {
                    if (item.ST == 0)
                    {
                        <tr class="danger">
                            <td>
                                <b>@Html.DisplayFor(modelItem => item.number)</b>
                            <td>
                                <b>@Html.DisplayFor(modelItem => item.CT)</b>
                            </td>
                            <td>
                                @Html.DisplayFor(modelItem => item.CompanyName)
                            </td>
                            <td>
                                @Html.DisplayFor(modelItem => item.name)
                            </td>
                            <td>
                                @Html.DisplayFor(modelItem => item.mobilephone)
                            </td>
                            <td>
                                @Html.DisplayFor(modelItem => item.CheckName)
                            </td>
                            <td>
                                @if (ViewData["select"].ToString() == "1")
                                {
                                    @Html.ActionLink("查看", "AdminCheckTableDeatils", new { id = item.ID }, new { @class = "glyphicon glyphicon-eye-open label label-primary" })
                                }
                            </td>
                        </tr>
                    }
                    else if (item.ST == 1)
                    {
                        <tr class="success">
                            <td>
                                <b>@Html.DisplayFor(modelItem => item.number)</b>
                            <td>
                                <b>@Html.DisplayFor(modelItem => item.CT)</b>
                            </td>
                            <td>
                                @Html.DisplayFor(modelItem => item.CompanyName)
                            </td>
                            <td>
                                @Html.DisplayFor(modelItem => item.name)
                            </td>
                            <td>
                                @Html.DisplayFor(modelItem => item.mobilephone)
                            </td>
                            <td>
                                @Html.DisplayFor(modelItem => item.CheckName)
                            </td>
                            <td>
                                @if (ViewData["select"].ToString() == "1")
                                {
                                    @Html.ActionLink("查看", "AdminCheckTableDeatils", new { id = item.ID }, new { @class = "glyphicon glyphicon-eye-open label label-primary" })
                                }
                            </td>
                        </tr>
                    }
                    else
                    {
                        <tr>
                            <td>
                                <b>@Html.DisplayFor(modelItem => item.number)</b>
                            <td>
                                <b>@Html.DisplayFor(modelItem => item.CT)</b>
                            </td>
                            <td>
                                @Html.DisplayFor(modelItem => item.CompanyName)
                            </td>
                            <td>
                                @Html.DisplayFor(modelItem => item.name)
                            </td>
                            <td>
                                @Html.DisplayFor(modelItem => item.mobilephone)
                            </td>
                            <td>
                                @Html.DisplayFor(modelItem => item.CheckName)
                            </td>
                            <td>
                                @if (ViewData["select"].ToString() == "1")
                                {
                                    @Html.ActionLink("审核", "AdminCheckTableCheck", new { id = item.ID }, new { @class = "glyphicon glyphicon-eye-open label label-danger" })
                                }
                            </td>
                        </tr>
                    }
                }
            }
        </tbody>
    </table>
    <br />
    Page @(Model.Item1.PageCount < Model.Item1.PageNumber ? 0 : Model.Item1.PageNumber) of @Model.Item1.PageCount
    @Html.PagedListPager(Model.Item1, page => Url.Action("AdminCheckTableMain", new { page, Model.Item2, ViewBag.CurrentSort }))
</div>

